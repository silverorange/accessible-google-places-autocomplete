{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"react\"","webpack:///./src/AccessibleGooglePlacesAutocomplete.tsx","webpack:///external \"accessible-autocomplete/react\"","webpack:///./src/translate.ts","webpack:///external \"get-value\"","webpack:///./src/parseUnitNumber.ts","webpack:///./src/GoogleMapsApiLoader.tsx","webpack:///external \"react-load-script\""],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","React","react_1","translate_1","parseUnitNumber_1","GoogleMapsApiLoader_1","AccessibleGooglePlacesAutocomplete","_super","props","_this","this","onAutoCompleteSelect","__awaiter","_a","_b","useMoreAccuratePostalCode","_c","onError","_d","onConfirm","placeId","formattedPredictionsMap","undefined","selectedPrediction","predictions","find","prediction","place_id","getPlaceDetails","placeResult","_e","sent","hasPartialPostalCode","address_components","getReverseGeocodeData","geocodeResult","filter","component","types","includes","concat","unitDesignator","unitNumber","designatorMap","fl","rm","push","long_name","short_name","hasPlaceSelected","placesSessionToken","google","maps","places","AutocompleteSessionToken","e_1","state","apiLoaded","currentStatusMessage","onApiLoad","onApiUnload","getSuggestions","getNoResultsMessage","getStatusResultsMessage","getStatusSelectedOptionMessage","getStatusNoResultsMessage","__extends","setState","autocompleteService","AutocompleteService","geocoderService","Geocoder","placesService","PlacesService","document","createElement","translate","selectedOption","option","statusNoResults","length","contentSelectedOption","statusResults","smart_count","query","populateResults","googlePlacesOptions","minLength","onClear","unitDesignators","parseUnitNumber","civicAddress","request","__assign","input","sessionToken","getPlacePredictions","status","PlacesServiceStatus","OK","reduce","accumulator","formatPrediction","description","results","keys","render","autoselect","googlePlacesApiKey","id","language","required","aria-live","style","visibility","GoogleMapsApiLoader","onLoad","onUnload","default","source","displayMenu","tNoResults","tStatusSelectedOption","tStatusNoResults","tStatusResults","unitAddress","replace","addressComponents","Promise","reject","resolve","getDetails","requestStatus","place","geocode","location","geometry","geocodeStatus","GeocoderStatus","bestResult","result","map","fieldName","isAddressMatch","isFieldMatch","Component","DEFAULT_UNIT_DESIGNATORS","DEFAULT_DESIGNATORS","message","context","translation","addressAutoComplete","noResults","statusSelectedOption","split","trim","match","contextKey","#","apartment","building","department","floor","hanger","lot","pier","room","slip","space","stop","suite","trailer","unit","unitLetterOrFractionExp","unitNumberExp","normalizeUnitNumber","toLocaleUpperCase","normalizeDesignator","designator","strippedDesignator","toLocaleLowerCase","designators","current","join","buildDesignatorExpression","dashedMatches","RegExp","exec","dashedLetterMatches","afterNumberMatches","afterStreetMatches","civicAddressPart1","civicAddressPart2","beforeCivicNumberMatches","Script","componentDidUpdate","prevProps","script","getElementById","HTMLElement","parentNode","googlePlacesApi","getScriptUrl","removeChild","loadedScripts","erroredScripts","scriptObservers","Fragment","url","attributes","encodedKey","encodeURIComponent"],"mappings":"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","file":"AccessibleGooglePlacesAutocomplete.es5.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","module.exports = require(\"react\");","import * as React from 'react';\nimport Autocomplete from 'accessible-autocomplete/react';\nimport { translate } from './translate';\nimport { DEFAULT_DESIGNATORS, parseUnitNumber } from './parseUnitNumber';\nimport { TLanguageCode } from './languageCodes';\nimport { GoogleMapsApiLoader } from './GoogleMapsApiLoader';\n\nconst DEFAULT_MIN_LENGTH = 4;\n\ninterface IAccessibleGooglePlacesAutocompleteOptions {\n  bounds?: google.maps.LatLngBounds | google.maps.LatLngBoundsLiteral;\n  componentRestrictions?: google.maps.places.ComponentRestrictions;\n  location?: google.maps.LatLng;\n  offset?: number;\n  radius?: number;\n  types?: string[];\n}\n\ninterface IAccessibleGooglePlacesAutocompleteProps {\n  autoselect?: boolean;\n  googlePlacesApiKey: string;\n  googlePlacesOptions?: IAccessibleGooglePlacesAutocompleteOptions;\n  id: string;\n  language?: TLanguageCode;\n  minLength?: number;\n  onClear?: () => void;\n  onConfirm?: (placeResult: google.maps.places.PlaceResult) => void;\n  onError?: (error: any) => void;\n  required?: boolean;\n  t?: any;\n  unitDesignators?: Record<string, string>;\n  useMoreAccuratePostalCode?: boolean;\n}\n\ninterface IAccessibleGooglePlacesAutocompleteState {\n  apiLoaded: boolean;\n}\n\nexport class AccessibleGooglePlacesAutocomplete extends React.Component<\n  IAccessibleGooglePlacesAutocompleteProps,\n  IAccessibleGooglePlacesAutocompleteState\n> {\n  private geocoderService?: google.maps.Geocoder;\n  private autocompleteService?: google.maps.places.AutocompleteService;\n  private placesService?: google.maps.places.PlacesService;\n  private placesSessionToken: google.maps.places.AutocompleteSessionToken;\n  private predictions: google.maps.places.AutocompletePrediction[];\n  private currentStatusMessage: string;\n  private formattedPredictionsMap: Record<string, string>;\n  private hasPlaceSelected: boolean;\n  private unitDesignator: string;\n  private unitNumber: string;\n\n  constructor(props: IAccessibleGooglePlacesAutocompleteProps) {\n    super(props);\n\n    this.state = {\n      apiLoaded: false\n    };\n\n    this.formattedPredictionsMap = {};\n    this.predictions = [];\n    this.unitDesignator = '';\n    this.unitNumber = '';\n    this.currentStatusMessage = '';\n\n    this.onApiLoad = this.onApiLoad.bind(this);\n    this.onApiUnload = this.onApiUnload.bind(this);\n    this.getSuggestions = this.getSuggestions.bind(this);\n    this.getNoResultsMessage = this.getNoResultsMessage.bind(this);\n    this.getStatusResultsMessage = this.getStatusResultsMessage.bind(this);\n    this.getStatusSelectedOptionMessage = this.getStatusSelectedOptionMessage.bind(\n      this\n    );\n    this.getStatusNoResultsMessage = this.getStatusNoResultsMessage.bind(this);\n  }\n\n  public onAutoCompleteSelect = async (value: string) => {\n    const {\n      useMoreAccuratePostalCode = false,\n      onError = () => null,\n      onConfirm = () => null\n    } = this.props;\n\n    const placeId = this.formattedPredictionsMap[value];\n    const selectedPrediction = this.predictions.find(\n      prediction => prediction.place_id === placeId\n    );\n\n    if (selectedPrediction !== undefined) {\n      try {\n        const placeResult = await this.getPlaceDetails(selectedPrediction);\n\n        if (\n          this.hasPartialPostalCode(placeResult.address_components) &&\n          useMoreAccuratePostalCode\n        ) {\n          const geocodeResult = await this.getReverseGeocodeData(placeResult);\n\n          // Remove Google Places postal code that may be a partial code.\n          placeResult.address_components = placeResult.address_components.filter(\n            component => !component.types.includes('postal_code')\n          );\n\n          // Add reverse geocode postal code value.\n          placeResult.address_components = placeResult.address_components.concat(\n            geocodeResult.address_components.filter(component =>\n              component.types.includes('postal_code')\n            )\n          );\n        }\n\n        if (\n          ['fl', 'rm'].includes(this.unitDesignator) &&\n          this.unitNumber !== ''\n        ) {\n          const designatorMap = {\n            fl: 'floor',\n            rm: 'room'\n          };\n\n          // If `room` or `floor` are parsed, add them to the address result the\n          // same way Google does.\n          placeResult.address_components.push({\n            long_name: this.unitNumber,\n            short_name: this.unitNumber,\n            types: [designatorMap[this.unitDesignator]]\n          });\n        } else {\n          // Add unit-number to address components if applicable. This is a\n          // custom field not returned by Google Places. See\n          // https://developers.google.com/maps/documentation/geocoding/intro#Types\n          if (this.unitNumber !== '') {\n            placeResult.address_components.push({\n              long_name: this.unitNumber,\n              short_name: this.unitNumber,\n              types: ['unit_number']\n            });\n          }\n\n          // Add unit-designator to address components if applicable. This is a\n          // custom field not returned by Google Places. See\n          // https://developers.google.com/maps/documentation/geocoding/intro#Types\n          if (this.unitDesignator !== '') {\n            placeResult.address_components.push({\n              long_name: this.unitDesignator,\n              short_name: this.unitDesignator,\n              types: ['unit_designator']\n            });\n          }\n        }\n\n        this.hasPlaceSelected = true;\n        this.placesSessionToken = new google.maps.places.AutocompleteSessionToken();\n\n        onConfirm(placeResult);\n      } catch (e) {\n        onError(e);\n      }\n    }\n  };\n\n  public onApiLoad() {\n    this.setState(() => ({ apiLoaded: true }));\n    this.autocompleteService = new google.maps.places.AutocompleteService();\n    this.geocoderService = new google.maps.Geocoder();\n    this.placesService = new google.maps.places.PlacesService(\n      document.createElement('div')\n    );\n    this.placesSessionToken = new google.maps.places.AutocompleteSessionToken();\n  }\n\n  public onApiUnload() {\n    this.setState(() => ({ apiLoaded: false }));\n    delete this.geocoderService;\n    delete this.autocompleteService;\n    delete this.placesService;\n    delete this.placesSessionToken;\n  }\n\n  public getNoResultsMessage(): string {\n    const { t = translate } = this.props;\n    return t('addressAutoComplete.noResults');\n  }\n\n  public getStatusSelectedOptionMessage(selectedOption: string): string {\n    const { t = translate } = this.props;\n    return t('addressAutoComplete.statusSelectedOption', {\n      option: selectedOption\n    });\n  }\n\n  public getStatusNoResultsMessage(): string {\n    const { t = translate } = this.props;\n    const statusNoResults = t('addressAutoComplete.statusNoResults');\n\n    // don't repeat \"No matching addresses\" over and over\n    if (this.currentStatusMessage === statusNoResults) {\n      return '';\n    }\n\n    this.currentStatusMessage = statusNoResults;\n    return statusNoResults;\n  }\n\n  public getStatusResultsMessage(\n    length: number,\n    contentSelectedOption: string\n  ): string {\n    const { t = translate } = this.props;\n\n    if (contentSelectedOption) {\n      return '';\n    }\n\n    const statusResults = t('addressAutoComplete.statusResults', {\n      smart_count: length\n    });\n\n    // don't repeat \"5 matching addresses\" over and over\n    if (this.currentStatusMessage === statusResults) {\n      return '';\n    }\n\n    this.currentStatusMessage = statusResults;\n    return statusResults;\n  }\n\n  public getSuggestions(query: string, populateResults: any): void {\n    const {\n      googlePlacesOptions = {},\n      minLength = DEFAULT_MIN_LENGTH,\n      onClear = () => null,\n      unitDesignators\n    } = this.props;\n\n    const { civicAddress, unitDesignator, unitNumber } = parseUnitNumber(\n      query,\n      unitDesignators\n    );\n\n    // After parsing the unit and designator, we need to check the minimum\n    // length again. This prevents sending empty strings to Google Places.\n    if (civicAddress.length < minLength) {\n      populateResults([]);\n      return;\n    }\n\n    const request: google.maps.places.AutocompletionRequest = {\n      ...googlePlacesOptions,\n      input: civicAddress,\n      sessionToken: this.placesSessionToken\n    };\n\n    const getPlaces = (\n      predictions: google.maps.places.AutocompletePrediction[],\n      status: google.maps.places.PlacesServiceStatus\n    ) => {\n      if (status !== google.maps.places.PlacesServiceStatus.OK) {\n        populateResults([]);\n        return;\n      }\n\n      this.predictions = predictions;\n      this.unitNumber = unitNumber;\n      this.unitDesignator = unitDesignator;\n      this.formattedPredictionsMap = predictions.reduce(\n        (accumulator, prediction) => {\n          const key = this.formatPrediction(\n            prediction.description,\n            unitDesignator,\n            unitNumber\n          );\n          return {\n            ...accumulator,\n            [key]: prediction.place_id\n          };\n        },\n        {}\n      );\n\n      const results = Object.keys(this.formattedPredictionsMap);\n      populateResults(results);\n    };\n\n    if (this.autocompleteService) {\n      this.autocompleteService.getPlacePredictions(request, getPlaces);\n    }\n\n    if (this.hasPlaceSelected) {\n      this.hasPlaceSelected = false;\n      onClear();\n    }\n  }\n\n  public render() {\n    const {\n      autoselect = false,\n      googlePlacesApiKey,\n      id,\n      language,\n      minLength = DEFAULT_MIN_LENGTH,\n      required = false\n    } = this.props;\n\n    const { apiLoaded } = this.state;\n\n    return (\n      <div\n        aria-live=\"polite\"\n        style={{ visibility: apiLoaded ? 'visible' : 'hidden' }}\n      >\n        <GoogleMapsApiLoader\n          googlePlacesApiKey={googlePlacesApiKey}\n          language={language}\n          onLoad={this.onApiLoad}\n          onUnload={this.onApiUnload}\n        />\n        <Autocomplete\n          autoselect={autoselect}\n          id={id}\n          source={this.getSuggestions}\n          minLength={minLength}\n          required={required}\n          displayMenu=\"overlay\"\n          tNoResults={this.getNoResultsMessage}\n          tStatusSelectedOption={this.getStatusSelectedOptionMessage}\n          tStatusNoResults={this.getStatusNoResultsMessage}\n          tStatusResults={this.getStatusResultsMessage}\n          onConfirm={this.onAutoCompleteSelect}\n        />\n      </div>\n    );\n  }\n\n  private formatPrediction(\n    civicAddress: string,\n    unitDesignator: string,\n    unitNumber: string\n  ): string {\n    if (unitDesignator !== '') {\n      const unitAddress = `${unitDesignator} ${unitNumber}`;\n\n      // Insert unit number and designator after first comma\n      return civicAddress.replace(/,/, ` ${unitAddress},`);\n    }\n\n    if (unitNumber !== '') {\n      return `${unitNumber}-${civicAddress}`;\n    }\n\n    return civicAddress;\n  }\n\n  private hasPartialPostalCode(\n    addressComponents: google.maps.GeocoderAddressComponent[]\n  ): boolean {\n    return (\n      addressComponents.find(component =>\n        component.types.includes('postal_code_prefix')\n      ) !== undefined\n    );\n  }\n\n  private getPlaceDetails(\n    prediction: google.maps.places.AutocompletePrediction\n  ): Promise<google.maps.places.PlaceResult> {\n    if (this.placesService === undefined) {\n      return Promise.reject('Google places service is not available.');\n    }\n\n    return new Promise((resolve, reject) => {\n      this.placesService!.getDetails(\n        {\n          placeId: prediction.place_id,\n          sessionToken: this.placesSessionToken\n        },\n        (\n          placeResult: google.maps.places.PlaceResult,\n          requestStatus: google.maps.places.PlacesServiceStatus\n        ) => {\n          if (requestStatus === google.maps.places.PlacesServiceStatus.OK) {\n            resolve(placeResult);\n          } else {\n            reject(requestStatus);\n          }\n        }\n      );\n    });\n  }\n\n  private getReverseGeocodeData(\n    place: google.maps.places.PlaceResult\n  ): Promise<google.maps.GeocoderResult> {\n    if (this.geocoderService === undefined) {\n      return Promise.reject('Google geocoding service is not available.');\n    }\n\n    return new Promise((resolve, reject) => {\n      this.geocoderService!.geocode(\n        {\n          location: place.geometry.location\n        },\n        (\n          geocodeResult: google.maps.GeocoderResult[],\n          geocodeStatus: google.maps.GeocoderStatus\n        ) => {\n          if (geocodeStatus === google.maps.GeocoderStatus.OK) {\n            // Find first reverse geocode address that matches the street\n            // number, name, and city.\n            const bestResult = geocodeResult.find(result => {\n              // Match all the required fields for the reverse geocode address\n              // and reduce field matches to a single boolean value.\n              return ['street_number', 'route', 'locality']\n                .map(fieldName => {\n                  return (\n                    place.address_components[fieldName] ===\n                    result.address_components[fieldName]\n                  );\n                })\n                .reduce((isAddressMatch, isFieldMatch) => {\n                  return isAddressMatch && isFieldMatch;\n                }, true);\n            });\n\n            resolve(bestResult === undefined ? geocodeResult[0] : bestResult);\n          } else {\n            reject(geocodeStatus);\n          }\n        }\n      );\n    });\n  }\n}\n\nexport const DEFAULT_UNIT_DESIGNATORS = DEFAULT_DESIGNATORS;\n","module.exports = require(\"accessible-autocomplete/react\");","import * as get from 'get-value';\n\nexport function translate(message: string, context: any): string {\n  const messages = {\n    addressAutoComplete: {\n      noResults: 'Address not found',\n      statusNoResults: 'No matching addresses',\n      statusResults:\n        '%{smart_count} matching address is available |||| %{smart_count} matching addresses are available',\n      statusSelectedOption: 'You’ve selected %{option}'\n    }\n  };\n\n  let translation = get(messages, message);\n\n  if (!context) {\n    return translation;\n  }\n\n  if (!translation) {\n    return message;\n  }\n\n  // Support English plurals. More complex requirements should use an external\n  // i18n library like Polyglot.\n  if (context.smart_count !== undefined) {\n    const pluralForms = translation.split('||||');\n    const pluralIndex = context.smart_count === 1 ? 0 : 1;\n    translation = pluralForms[pluralIndex].trim();\n  }\n\n  // Interpolate results.\n  return translation.replace(\n    /%\\{(.*?)\\}/g,\n    (match: string, contextKey: string): string => {\n      if (context[contextKey] === undefined) {\n        return match;\n      }\n      if (typeof context[contextKey] === 'string') {\n        return context[contextKey].replace(/\\$/g, '$$');\n      }\n      return context[contextKey];\n    }\n  );\n}\n","module.exports = require(\"get-value\");","export interface IParseUnitNumberResult {\n  civicAddress: string;\n  unitDesignator: string;\n  unitNumber: string;\n}\n\n// Mapping of full unit designator string to preferred abbreviation. See\n// https://pe.usps.com/text/pub28/28apc_003.htm#ep538629 for a list of\n// supported unit number designators.\nexport const DEFAULT_DESIGNATORS = {\n  '#': '',\n  apartment: 'apt',\n  building: 'bldg',\n  department: 'dept',\n  floor: 'fl',\n  hanger: 'hngr',\n  key: 'key',\n  lot: 'lot',\n  pier: 'pier',\n  room: 'rm',\n  slip: 'slip',\n  space: 'spc',\n  stop: 'stop',\n  suite: 'ste',\n  trailer: 'trlr',\n  unit: 'unit'\n};\n\nfunction buildDesignatorExpression(unitDesignators: Record<string, string>) {\n  return Object.keys(unitDesignators)\n    .reduce((accumulator, current) => {\n      const value = unitDesignators[current];\n      if (value !== '' && value !== current) {\n        return [...accumulator, current, `${value}\\\\.?`];\n      }\n      return [...accumulator, current];\n    }, [])\n    .join('|');\n}\n\n// Matches Unit numbers that are one letter, unicode fractions, or full\n// fractions.\nconst unitLetterOrFractionExp = '[a-z¼½¾]|(?:1/4|1/2|3/4)';\n\n// Matches Unit numbers that are all numbers, one letter, or numbers followed\n// by 1 letter, unicode fractions, or full fractions. Letter or fractional\n// suffixes may be separated with space or dash. Full fraction form may be\n// separated only by space. Note that fractional units or standalone letters\n// are intentionally matched first.\nconst unitNumberExp = `${unitLetterOrFractionExp}|\\\\d+(?:[\\\\s-]?[a-z¼½¾]|\\\\s?(?:1/4|1/2|3/4))?`;\n\n// Removes and space or dash separators from unit and returns in upper-case.\n// Converts vulgar fraction characters to ASCII.\nfunction normalizeUnitNumber(unitNumber: string): string {\n  return unitNumber\n    .replace(/-/g, ' ') // replace dashes with spaces\n    .replace(/\\s+([a-z])/gi, '$1') // remove spaces before letters\n    .replace(/¼/g, ' 1/4')\n    .replace(/½/g, ' 1/2')\n    .replace(/¾/g, ' 3/4')\n    .replace(/^\\s+/g, '') // strip leading spaces\n    .toLocaleUpperCase();\n}\n\n// Removes any trailing . characters and normalizes to the preferred designator\n// abbreviation.\nfunction normalizeDesignator(\n  unitDesignators: Record<string, string>,\n  designator: string\n): string {\n  const strippedDesignator = designator.replace(/\\./, '').toLocaleLowerCase();\n\n  return unitDesignators[strippedDesignator] !== undefined\n    ? unitDesignators[strippedDesignator]\n    : strippedDesignator;\n}\n\nexport function parseUnitNumber(\n  query: string,\n  unitDesignators: Record<string, string> = DEFAULT_DESIGNATORS\n): IParseUnitNumberResult {\n  // Combine designators and abbreviated designators into regex string.\n  const designators = buildDesignatorExpression(unitDesignators);\n\n  // Match dashed address formats where the unit goes before the street number.\n  const dashedExp = new RegExp(\n    `^[\\\\s#]*(${unitNumberExp})[\\\\s-–\\\\/]+([0-9]+\\\\s.*)\\\\s*$`,\n    'i'\n  );\n\n  const dashedMatches = dashedExp.exec(query);\n  if (dashedMatches !== null) {\n    const unitNumber = normalizeUnitNumber(dashedMatches[1]);\n    return {\n      civicAddress: dashedMatches[2],\n      unitDesignator: '',\n      unitNumber\n    };\n  }\n\n  // Match dashed address formats where the unit is a letter or fraction after\n  // the street number.\n  const dashedLetterExp = new RegExp(\n    `^\\\\s*(\\\\d+)[\\\\s-–\\\\/]*(${unitLetterOrFractionExp})\\\\s(\\\\D.*)?\\\\s*$`,\n    'i'\n  );\n  const dashedLetterMatches = dashedLetterExp.exec(query);\n  if (dashedLetterMatches !== null) {\n    const unitNumber = normalizeUnitNumber(dashedLetterMatches[2]);\n    return {\n      civicAddress: `${dashedLetterMatches[1]} ${dashedLetterMatches[3]}`,\n      unitDesignator: '',\n      unitNumber\n    };\n  }\n\n  // Match unit number and designator after the civic number and before the\n  // street name. Needs to go before after-street case to prevent parsing civic\n  // number as a full street address.\n  const afterNumber = new RegExp(\n    `^\\\\s*(\\\\d+)\\\\s+(${designators})\\\\s*(${unitNumberExp})([\\\\s,].*)$`,\n    'i'\n  );\n  const afterNumberMatches = afterNumber.exec(query);\n  if (afterNumberMatches !== null) {\n    const unitDesignator = normalizeDesignator(\n      unitDesignators,\n      afterNumberMatches[2]\n    );\n    const unitNumber = normalizeUnitNumber(afterNumberMatches[3]);\n    return {\n      civicAddress: `${afterNumberMatches[1].replace(\n        /[\\s,]*$/,\n        ''\n      )} ${afterNumberMatches[4].replace(/^[\\s,]*/, '')}`,\n      unitDesignator,\n      unitNumber\n    };\n  }\n\n  // Match unit number and designator after the street address.\n  const afterStreet = new RegExp(\n    `^\\\\s*(\\\\d+.+)\\\\s(${designators})\\\\s*(${unitNumberExp})([\\\\s,].*|$)$`,\n    'i'\n  );\n  const afterStreetMatches = afterStreet.exec(query);\n  if (afterStreetMatches !== null) {\n    const unitDesignator = normalizeDesignator(\n      unitDesignators,\n      afterStreetMatches[2]\n    );\n    const unitNumber = normalizeUnitNumber(afterStreetMatches[3]);\n    const civicAddressPart1 = afterStreetMatches[1].replace(/[\\s,]*$/, '');\n    const civicAddressPart2 = afterStreetMatches[4].replace(/^[\\s,]*/, '');\n    const civicAddress = civicAddressPart2\n      ? `${civicAddressPart1}, ${civicAddressPart2}`\n      : civicAddressPart1;\n\n    return {\n      civicAddress,\n      unitDesignator,\n      unitNumber\n    };\n  }\n\n  // Match unit number and designator before the civic number.\n  const beforeCivicNumber = new RegExp(\n    `^\\\\s*(${designators})\\\\s*(${unitNumberExp})[-\\\\s,]+(.*)$`,\n    'i'\n  );\n  const beforeCivicNumberMatches = beforeCivicNumber.exec(query);\n  if (beforeCivicNumberMatches !== null) {\n    const unitDesignator = normalizeDesignator(\n      unitDesignators,\n      beforeCivicNumberMatches[1]\n    );\n    const unitNumber = normalizeUnitNumber(beforeCivicNumberMatches[2]);\n    return {\n      civicAddress: beforeCivicNumberMatches[3].replace(/^\\s*/, ''),\n      unitDesignator,\n      unitNumber\n    };\n  }\n\n  // No unit number was parsed in the given address.\n  return {\n    civicAddress: query,\n    unitDesignator: '',\n    unitNumber: ''\n  };\n}\n","import * as React from 'react';\nimport * as Script from 'react-load-script';\nimport { TLanguageCode } from './languageCodes';\n\ninterface IGoogleMapsApiLoaderProps {\n  googlePlacesApiKey: string;\n  language?: TLanguageCode;\n  onLoad?: () => void;\n  onUnload?: () => void;\n}\n\ninterface IGoogleMapsApiLoaderState {\n  apiLoaded: boolean;\n}\n\nconst SCRIPT_ID = 'google-maps-script';\n\nexport class GoogleMapsApiLoader extends React.Component<\n  IGoogleMapsApiLoaderProps,\n  IGoogleMapsApiLoaderState\n> {\n  constructor(props: IGoogleMapsApiLoaderProps) {\n    super(props);\n\n    this.state = {\n      apiLoaded: false\n    };\n\n    this.onApiLoad = this.onApiLoad.bind(this);\n  }\n\n  public onApiLoad() {\n    const { onLoad } = this.props;\n    this.setState(() => ({ apiLoaded: true }));\n\n    if (onLoad) {\n      onLoad();\n    }\n  }\n\n  public componentDidUpdate(prevProps: IGoogleMapsApiLoaderProps) {\n    const { language, onUnload } = this.props;\n    if (language !== prevProps.language) {\n      // Unload current Google Maps API\n      const script = document.getElementById(SCRIPT_ID);\n      if (script instanceof HTMLElement && script.parentNode) {\n        const googlePlacesApi = this.getScriptUrl();\n        script.parentNode.removeChild(script);\n\n        delete google.maps;\n\n        delete Script.loadedScripts[googlePlacesApi];\n        delete Script.erroredScripts[googlePlacesApi];\n        delete Script.scriptObservers[googlePlacesApi];\n\n        this.setState(() => ({\n          apiLoaded: false\n        }));\n\n        if (onUnload) {\n          onUnload();\n        }\n      }\n    }\n  }\n\n  public render() {\n    const { apiLoaded } = this.state;\n\n    const googlePlacesApi = this.getScriptUrl();\n\n    return (\n      <React.Fragment>\n        {!apiLoaded && (\n          <Script\n            url={googlePlacesApi}\n            onLoad={this.onApiLoad}\n            attributes={{ id: SCRIPT_ID }}\n          />\n        )}\n      </React.Fragment>\n    );\n  }\n\n  private getScriptUrl(): string {\n    const { googlePlacesApiKey } = this.props;\n\n    const encodedKey = encodeURIComponent(googlePlacesApiKey);\n    return this.props.language\n      ? `https://maps.googleapis.com/maps/api/js?key=${encodedKey}&libraries=places&language=${\n          this.props.language\n        }`\n      : `https://maps.googleapis.com/maps/api/js?key=${encodedKey}&libraries=places`;\n  }\n}\n","module.exports = require(\"react-load-script\");"],"sourceRoot":""}